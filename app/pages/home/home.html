<!--
  Generated template for the HomePage page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-navbar primary *navbar>
  <ion-title>Home</ion-title>
</ion-navbar>
<ion-toolbar>
  <ion-segment secondary [(ngModel)]="listingType">
    <ion-segment-button value="all">
      All
    </ion-segment-button>
    <ion-segment-button value="free">
      Free
    </ion-segment-button>
    <ion-segment-button value="forsale">
      For Sale
    </ion-segment-button>
  </ion-segment>
</ion-toolbar>

<ion-content class="home">
  <div *ngFor="#listing of fbdb.toprecentItems">
  <ion-card *ngIf="(listingType == 'free' && listing.val().askingprice == 0)
            ||(listingType == 'forsale' && listing.val().askingprice > 0)||(listingType == 'all')">
    <ion-item>
      <ion-thumbnail item-left (click)="showImages()">
        <img [src]="listing.val().img">
      </ion-thumbnail>
      <h2><b>{{listing.val().title}}</b></h2>
      <p>Posted by V. Repkow</p>
      <div item-right text-right>
        <h2 *ngIf="listing.val().askingprice == 0">FREE</h2>
        <h2 *ngIf="listing.val().askingprice != 0">${{listing.val().askingprice}} (OBO)</h2>
        <p>(4.7 <ion-icon name="star"></ion-icon>)</p>
      </div>
    </ion-item>
    <ion-card-content>
      <p>Brand new vaccum, great condition, barely used. Sucks the shit out of anything.</p>
    </ion-card-content>
    <ion-item>
      <p item-left>Best offer: ${{listing.val().bestoffer}}</p>
      <p text-center><ion-icon name="people"> 3</ion-icon></p>
      <button item-right clear secondary (click)="makeBid(listing.key())" [disabled]="listing.val().seller == fbdb.user.password.email"><ion-icon name="arrow-dropup"></ion-icon> Make an offer</button>
    </ion-item>
  </ion-card>
  </div>
</ion-content>
